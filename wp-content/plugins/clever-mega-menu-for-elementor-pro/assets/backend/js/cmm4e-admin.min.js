!function(){"use strict";function m(){jQuery(".clever-mega-menu-popup").hide(),jQuery("#clever-mega-menu-overlay").hide(),jQuery(".clever-mega-menu-customize-vc-iframe-wrapper",jQuery("body")).length&&jQuery(".clever-mega-menu-customize-vc-iframe-wrapper",jQuery("body")).removeClass("clever-mega-menu-customize-show-vc").addClass("clever-mega-menu-customize-hide-vc")}window.clever_mega_menu_item_title="",window.currentEditItem={},jQuery(function(i){var e=i(i("#clever-mega-menu-settings").html());e&&(i("#update-nav-menu .menu-settings").append(e),"undefined"!=typeof wpNavMenu&&(wpNavMenu.menusChanged=!1)),i(function(){var e=i(".clever-mega-menu-item-icon"),n=i(".clever-mega-menu-item-edit-btn"),t=i("#clever-mega-menu-enable-checkbox"),m=i(".clever-mega-menu-advanced-setting");t.is(":checked")?(n.addClass("clever-mega-menu-active-edit-btn"),e.show(),m.show()):(n.removeClass("clever-mega-menu-active-edit-btn"),e.hide(),m.hide()),t.change(function(){t.is(":checked")?(n.addClass("clever-mega-menu-active-edit-btn"),e.show(),m.show()):(n.removeClass("clever-mega-menu-active-edit-btn"),e.hide(),m.hide())})})});function i(e){var t=this,n=jQuery;e.hasClass("menu-item-depth-0")?t.isChild=!1:t.isChild=!0,t.item=e,t.tpl=n(n("#clever-mega-menu-popup-tpl").html()),t.navId=n("#update-nav-menu #menu").val(),t.menuId=n("input.menu-item-data-db-id",e).val(),t.settings=!1,void 0!==cleverMenuItems[t.menuId]&&(t.settings=cleverMenuItems[t.menuId]),t.settings&&(""!==t.settings.cmm4e_icon&&n(".item-title",e).prepend('<span class="clever-mega-menu-item-icon"><i class="'+t.settings.cmm4e_icon+'"></i></span>'),"yes"===t.settings.enable_mega?e.addClass("clever-mega-menu-item-mega-enabled"):e.removeClass("clever-mega-menu-item-mega-enabled")),t.autoFrameHeight=function(){t.tpl.css({top:0,right:0,bottom:0,left:0}),n(".clever-mega-menu-popup").each(function(){var e=t.tpl.height();n("iframe",t.tpl).eq(0).height(e-30)})},t.setPopupTitle=function(){window.clever_mega_menu_item_title=n(".edit-menu-item-title",e).val()},t.toggleMega=function(e){switch(e){case!0:t.item.hasClass("clever-mega-menu-item-mega-enabled")||t.item.addClass("clever-mega-menu-item-mega-enabled");break;default:t.item.hasClass("clever-mega-menu-item-mega-enabled")&&t.item.removeClass("clever-mega-menu-item-mega-enabled")}},t.setIcon=function(e){var n=t.item.find(".clever-mega-menu-item-icon");n.length?n.find("i").attr("class",e):t.item.find(".item-title").prepend('<span class="clever-mega-menu-item-icon"><i class="'+e+'"></i></span>')},t.hidePopup=function(){t.tpl.hide(),n("#clever-mega-menu-overlay").remove()},t.openPopup=function(){if(n("#clever-mega-menu-theme").val()){var e;if(window.currentEditItem=t,0<n("iframe",t.tpl).length);else e=cmm4eConfig.editUrl+"&cmm4e_menu_id="+t.navId+"&cmm4e_menu_post_id="+t.menuId,t.tpl.append('<div class="cs-font clever-icon-close-1 cmm4e-close-editor"></div>'),t.tpl.append('<iframe id="clever-mega-menu-item-frame-'+t.menuId+'" src="'+e+'" class="clever-mega-menu-iframe"></iframe>');t.frame=n("iframe",t.tpl).eq(0),t.tpl.attr("id","clever-mega-menu-menu-id-"+t.menuId),n("#clever-mega-menu-overlay").remove(),n("body").append('<div id="clever-mega-menu-overlay"></div>'),n("#clever-mega-menu-overlay").on("click",function(){return t.hidePopup(),!1}),n("body .clever-mega-menu-popup").hide(),t.setPopupTitle(),0<n("#clever-mega-menu-menu-id-"+t.menuId).length?t.autoFrameHeight():(t.autoFrameHeight(),n("body").append(t.tpl),t.autoFrameHeight(),n(window).resize(function(){t.autoFrameHeight()})),t.tpl.show(),n(".cmm4e-close-editor").on("click",m)}else alert(cmm4eL10n.selectMenuTheme)},n(".clever-mega-menu-item-edit-btn",e).on("click",function(){return t.openPopup(e),!1})}jQuery(function(e){"undefined"!=typeof wpNavMenu&&function(){var m;m=jQuery("#clever-mega-menu-enable-checkbox"),jQuery("li",wpNavMenu.menuList).each(function(){var e=jQuery(this),n=jQuery(".item-title",e),t="clever-mega-menu-item-edit-btn";m.is(":checked")&&(t="clever-mega-menu-item-edit-btn clever-mega-menu-active-edit-btn"),0===jQuery(".clever-mega-menu-item-edit-btn",e).length&&(n.append('<span class="'+t+'"><i class="dashicons dashicons-admin-customizer"></i>'+cmm4eL10n.editBtn+"</span>"),new i(e))})}(),e("form#update-nav-menu").submit(function(){e("body .clever-mega-menu-popup").remove()})}),window.clever_menu_data_item_changes=function(e,n){window.currentEditItem.tpl.hide(),n.is_update||jQuery("iframe",window.currentEditItem.tpl).remove(),jQuery("#clever-mega-menu-overlay").remove(),cleverMenuItems[window.currentEditItem.menuId]=n.settings,window.currentEditItem.settings=n.settings,""!==n.settings.cmm4e_icon&&window.currentEditItem.setIcon(n.settings.cmm4e_icon),"yes"===n.settings.enable_mega?window.currentEditItem.item.addClass("clever-mega-menu-item-mega-enabled"):window.currentEditItem.item.removeClass("clever-mega-menu-item-mega-enabled"),"undefined"!=typeof wpNavMenu&&(wpNavMenu.menusChanged=!1)}}(jQuery);